import os
import sys
import time
from multiprocessing import Process, Pipe

def sendCommands(parentIn, parentOut ):
    # Read what program says
    for line in parentOut:
        print(line)
    # write your user name
    os.write(parentIn, "hi\r\n")

    # Read what program says
    for line in parentOut:
        print(line)

    # write your password
    os.write(parentIn, "hi\r\n")
    os.write(parentIn, "hi\r\n")
    os.write(parentIn, "hi\r\n")

if __name__ == '__main__':
    # create a pipe for the program
    stdin  = sys.stdin.fileno()  # usually 0
    stdout = sys.stdout.fileno()  # usually 1
    parentIn, childOut = os.pipe()
    childIn, parentOut = os.pipe()
    pid = os.fork()

    if pid == 0:  # child
        # redirect and close pipes
        os.dup2(childIn, stdin)
        os.dup2(childOut, stdout)
        os.close(parentIn)
        os.close(parentOut)
        os.close(childIn)
        os.close(childOut)

        # Execute the program
        os.system("FunctionsAndVariables.exe")

    else:  # parent
        # interact with the program
        sendCommands(childIn, childOut)

    # Wait so we can read it
    os.sleep()
    os.waitpid(pid, 0)